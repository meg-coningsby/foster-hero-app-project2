<%- include('../partials/header') %>
<h1>ALL CATS</h1>
<ul class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li>All Cats</li>
</ul>
<div class="filter-and-search">
    <div class="filtering-links">
        <a href="/cats" class="button-link-main active-filter">ALL</a>
        <a href="/cats/incare" class="button-link-main">IN CARE</a>
        <a href="/cats/adoptable" class="button-link-main">UP FOR ADOPTION</a>
        <a href="/cats/adopted" class="button-link-main">ADOPTED</a>
    </div>
    <div class="search-bar">
        <input id="search" type="search" placeholder="&#x1F50D; Search" />
    </div>
</div>
<div class="all-cats">
    <% cats.forEach(function(c) { %>
    <div class="cat">
        <div class="cat-image">
            <a href="/cats/<%= c._id %>"><img src="<%= c.image %>" /></a>
        </div>
        <div class="cat-name">
            <a href="/cats/<%= c._id %>"><%= c.name %></a>
        </div>
    </div>
    <% }) %>
</div>

<script>
    const searchInput = document.getElementById("search");
    const catNamesFromDOM = document.getElementsByClassName("cat-name");
    searchInput.addEventListener("keyup", (event) => {
        const { value } = event.target;

        // get user search input converted to lowercase
        const searchQuery = value.toLowerCase();

        for (const nameElement of catNamesFromDOM) {
            // store name text and convert to lowercase
            let name = nameElement.textContent.toLowerCase();

            // compare current name to search input
            if (name.includes(searchQuery)) {
                // found name matching search, display it
                nameElement.parentElement.style.display = "block";
            } else {
                // no match, don't display name
                nameElement.parentElement.style.display = "none";
            }
        }
    });
</script>

<%- include('../partials/footer') %>
